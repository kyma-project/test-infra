templates:
  - from: templates/generic.tmpl
    render:
      - to: ../prow/jobs/busola/busola-periodics.yaml
        localSets:
          periodic_config:
            skip_report: "false"
            max_concurrency: "10"
            decorate: "true"
            type_periodic: "true"
            cluster: "trusted-workload"
          github_token_mounts:
            volumes:
              - name: kyma-bot-github-token
                secretName: kyma-bot-github-token
            volumeMounts:
              - name: kyma-bot-github-token
                mountPath: /etc/github
                readOnly: true
          label_sync_mounts:
            volumes:
              - name: kyma-bot-github-token
                secretName: kyma-bot-github-token
              - name: config
                configMapName: label-config
            volumeMounts:
              - name: kyma-bot-github-token
                mountPath: /etc/github
                readOnly: true
              - name: config
                mountPath: /etc/config
                readOnly: true
        jobConfigs:
          - repoName: kyma-project/busola
            jobs:
              - jobConfig:
                  name: busola-backend-autobump
                  cron: "30 * * * 1-5"
                  slack_channel: kyma-prow-alerts
                  image: gcr.io/k8s-prow/generic-autobumper:v20210925-32993b3b20
                  command: /app/prow/cmd/generic-autobumper/app.binary
                  args:
                    - --config=prow/autobump-config/busola-backend-autobump-config.yaml
                inheritedConfigs:
                  local:
                    - periodic_config
                    - github_token_mounts
                  global:
                    - "pubsub_labels"
                    - "disable_testgrid"
                    - extra_refs_test-infra
              - jobConfig:
                  name: busola-web-autobump
                  cron: "30 * * * 1-5"
                  slack_channel: kyma-prow-alerts
                  image: gcr.io/k8s-prow/generic-autobumper:v20210925-32993b3b20
                  command: /app/prow/cmd/generic-autobumper/app.binary
                  args:
                    - --config=prow/autobump-config/busola-web-autobump-config.yaml
                inheritedConfigs:
                  local:
                    - periodic_config
                    - github_token_mounts
                  global:
                    - "pubsub_labels"
                    - "disable_testgrid"
                    - extra_refs_test-infra