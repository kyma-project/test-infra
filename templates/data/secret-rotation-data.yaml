templates:
  - from: generic.tmpl
    render:
      - to: ../../prow/jobs/test-infra/secrets-rotation.yaml
        localSets:
          secret_sa:
            labels:
              preset-sa-secret-update: "true"
        jobConfigs:
          - repoName: "github.com/kyma-project/test-infra"
            jobs:
              - jobConfig:
                  name: "secrets-rotate-gardener-canary"
                  cron: "0 5 1 * *" # At 05:00 on day-of-month 1.
                  command: "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/rotate-gardener-tokens.sh"
                  args:
                    - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/resources/rotation/secrets-gardener-neighbors.yaml"
                  labels:
                    preset-gardener-neighbors: "true"
                inheritedConfigs:
                  local:
                    - "secret_sa"
                  global:
                    - "image_bootstrap"
                    - "jobConfig_periodic"
                    - "jobConfig_default"
