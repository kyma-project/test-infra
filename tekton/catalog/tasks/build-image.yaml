apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: build-image
  labels:
    app.kubernetes.io/version: "0.1"
  annotations:
    tekton.dev/pipelines.minVersion: "0.36.0"
    tekton.dev/categories: Git
    tekton.dev/tags:
    tekton.dev/displayName: "build-image"
    tekton.dev/platforms: "linux/amd64"
spec:
  description: >-
    The clonerefs Task will clone a repo from the provided url into the
    output Workspace. By default the repo will be cloned into the root of
    your Workspace. You can clone into a subdirectory by setting this Task's
    subdirectory param. This Task also supports sparse checkouts. To perform
    a sparse checkout, pass a list of comma separated directory patterns to
    this Task's sparseCheckoutDirectories param.
  workspaces:
    - name: repo
      description: TODO
      mountPath: /home/prow/go
    - name: config
      description: TODO
      mountPath: /config
    - name: signify-secret
      description: TODO
      mountPath: /secret
  params:
    - name: name
      description: TODO
      type: string
    - name: config
      description: TODO
      type: string
    - name: context
      description: TODO
      type: string
    - name: dockerfile
      description: TODO
      type: string
  steps:
  - name: build-image
    image: eu.gcr.io/sap-kyma-neighbors-dev/image-builder:v20230227-a5399439c
    command:
      - /image-builder
    args:
        - --name=$(params.name)
        - --config=$(params.config)
        - --context=$(params.context)
        - --dockerfile=$(params.dockerfile)
    resources:
        requests:
            memory: 1.5Gi
            cpu: 1
