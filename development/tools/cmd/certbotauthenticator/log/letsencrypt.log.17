2020-05-03 23:29:09,028:DEBUG:certbot._internal.main:certbot version: 1.3.0
2020-05-03 23:29:09,029:DEBUG:certbot._internal.main:Arguments: ['--agree-tos', '--no-eff-email', '-m', 'przemek.pokrywka@gmail.com', '--server', 'https://acme-staging-v02.api.letsencrypt.org/directory', '--manual', '--manual-public-ip-logging-ok', '--preferred-challenges', 'dns', '--manual-auth-hook', '/bot/certbotauthenticator', '--manual-cleanup-hook', '/bot/certbotauthenticator', '-d', 'a.build.kyma-project.io.']
2020-05-03 23:29:09,029:DEBUG:certbot._internal.main:Discovered plugins: PluginsRegistry(PluginEntryPoint#manual,PluginEntryPoint#null,PluginEntryPoint#standalone,PluginEntryPoint#webroot)
2020-05-03 23:29:09,387:DEBUG:certbot._internal.log:Root logging level set at 20
2020-05-03 23:29:09,388:INFO:certbot._internal.log:Saving debug log to /var/log/letsencrypt/letsencrypt.log
2020-05-03 23:29:09,396:DEBUG:certbot._internal.plugins.selection:Requested authenticator manual and installer None
2020-05-03 23:29:09,405:DEBUG:certbot._internal.plugins.selection:Single candidate plugin: * manual
Description: Manual configuration or run your own shell scripts
Interfaces: IAuthenticator, IPlugin
Entry point: manual = certbot._internal.plugins.manual:Authenticator
Initialized: <certbot._internal.plugins.manual.Authenticator object at 0x7f772598a0a0>
Prep: True
2020-05-03 23:29:09,406:DEBUG:certbot._internal.plugins.selection:Selected authenticator <certbot._internal.plugins.manual.Authenticator object at 0x7f772598a0a0> and installer None
2020-05-03 23:29:09,407:INFO:certbot._internal.plugins.selection:Plugins selected: Authenticator manual, Installer None
2020-05-03 23:29:09,429:DEBUG:certbot._internal.main:Picked account: <Account(RegistrationResource(body=Registration(key=None, contact=(), agreement=None, status=None, terms_of_service_agreed=None, only_return_existing=None, external_account_binding=None), uri='https://acme-staging-v02.api.letsencrypt.org/acme/acct/13474575', new_authzr_uri=None, terms_of_service=None), 0ca10773bedaf0252bc041e7c5277c08, Meta(creation_dt=datetime.datetime(2020, 5, 3, 22, 46, 17, tzinfo=<UTC>), creation_host='1fe450f9cd72'))>
2020-05-03 23:29:09,431:DEBUG:acme.client:Sending GET request to https://acme-staging-v02.api.letsencrypt.org/directory.
2020-05-03 23:29:09,434:DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): acme-staging-v02.api.letsencrypt.org:443
2020-05-03 23:29:10,181:DEBUG:urllib3.connectionpool:https://acme-staging-v02.api.letsencrypt.org:443 "GET /directory HTTP/1.1" 200 724
2020-05-03 23:29:10,184:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Sun, 03 May 2020 23:29:10 GMT
Content-Type: application/json
Content-Length: 724
Connection: keep-alive
Cache-Control: public, max-age=0, no-cache
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "eEwiVe_K7NM": "https://community.letsencrypt.org/t/adding-random-entries-to-the-directory/33417",
  "keyChange": "https://acme-staging-v02.api.letsencrypt.org/acme/key-change",
  "meta": {
    "caaIdentities": [
      "letsencrypt.org"
    ],
    "termsOfService": "https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf",
    "website": "https://letsencrypt.org/docs/staging-environment/"
  },
  "newAccount": "https://acme-staging-v02.api.letsencrypt.org/acme/new-acct",
  "newNonce": "https://acme-staging-v02.api.letsencrypt.org/acme/new-nonce",
  "newOrder": "https://acme-staging-v02.api.letsencrypt.org/acme/new-order",
  "revokeCert": "https://acme-staging-v02.api.letsencrypt.org/acme/revoke-cert"
}
2020-05-03 23:29:10,189:INFO:certbot._internal.main:Obtaining a new certificate
2020-05-03 23:29:10,247:DEBUG:certbot.crypto_util:Generating key (2048 bits): /etc/letsencrypt/keys/0009_key-certbot.pem
2020-05-03 23:29:10,257:DEBUG:certbot.crypto_util:Creating CSR: /etc/letsencrypt/csr/0009_csr-certbot.pem
2020-05-03 23:29:10,260:DEBUG:acme.client:Requesting fresh nonce
2020-05-03 23:29:10,261:DEBUG:acme.client:Sending HEAD request to https://acme-staging-v02.api.letsencrypt.org/acme/new-nonce.
2020-05-03 23:29:10,449:DEBUG:urllib3.connectionpool:https://acme-staging-v02.api.letsencrypt.org:443 "HEAD /acme/new-nonce HTTP/1.1" 200 0
2020-05-03 23:29:10,451:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Sun, 03 May 2020 23:29:10 GMT
Connection: keep-alive
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-staging-v02.api.letsencrypt.org/directory>;rel="index"
Replay-Nonce: 0002xRqfGX04Htvh65i2MskACsD0yWaSFNf8UQAOy1fA3kE
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800


2020-05-03 23:29:10,452:DEBUG:acme.client:Storing nonce: 0002xRqfGX04Htvh65i2MskACsD0yWaSFNf8UQAOy1fA3kE
2020-05-03 23:29:10,454:DEBUG:acme.client:JWS payload:
b'{\n  "identifiers": [\n    {\n      "type": "dns",\n      "value": "a.build.kyma-project.io"\n    }\n  ]\n}'
2020-05-03 23:29:10,457:DEBUG:acme.client:Sending POST request to https://acme-staging-v02.api.letsencrypt.org/acme/new-order:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS1zdGFnaW5nLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvYWNjdC8xMzQ3NDU3NSIsICJub25jZSI6ICIwMDAyeFJxZkdYMDRIdHZoNjVpMk1za0FDc0QweVdhU0ZOZjhVUUFPeTFmQTNrRSIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXN0YWdpbmctdjAyLmFwaS5sZXRzZW5jcnlwdC5vcmcvYWNtZS9uZXctb3JkZXIifQ",
  "signature": "ZUstAPqngr3pWivNdUcAqNEg1J2I9vOKcNljctV-uUYHIcUnJHjqXNIYkYiDJnN-HxJfJ7d-8vP5-mM0YaVNZ3mRTd8bBP5Qe2HLfx6z3mdDBzLlweFbLb2cFUIY7QYHoCLy18oFBL7c2MH9Ibb0fznj6c_EbgWwCrtyd_rlR4b_jSbVoSOiEn7ZHxeiqk9lC8kmEdRJRxcV_dQIEhUnUNsZrHgPTZHQv6bE8pPkRqhqX5Oqg5qOAsxNE9kvC_I9TiPzs_2A7rLhgTTD837SCGzgSFGxmSogUOIJV3bjJlLsEPd8SEODbW1uAOKeSVX6OJO923Vnr4gAh9iKTVxuZA",
  "payload": "ewogICJpZGVudGlmaWVycyI6IFsKICAgIHsKICAgICAgInR5cGUiOiAiZG5zIiwKICAgICAgInZhbHVlIjogImEuYnVpbGQua3ltYS1wcm9qZWN0LmlvIgogICAgfQogIF0KfQ"
}
2020-05-03 23:29:10,666:DEBUG:urllib3.connectionpool:https://acme-staging-v02.api.letsencrypt.org:443 "POST /acme/new-order HTTP/1.1" 201 365
2020-05-03 23:29:10,668:DEBUG:acme.client:Received response:
HTTP 201
Server: nginx
Date: Sun, 03 May 2020 23:29:10 GMT
Content-Type: application/json
Content-Length: 365
Connection: keep-alive
Boulder-Requester: 13474575
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-staging-v02.api.letsencrypt.org/directory>;rel="index"
Location: https://acme-staging-v02.api.letsencrypt.org/acme/order/13474575/89387775
Replay-Nonce: 00027x38Gybgzayi4zV9_9WGAAzkUUXVkpKTPuBJYWvSBYY
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "status": "pending",
  "expires": "2020-05-10T23:29:10.533904199Z",
  "identifiers": [
    {
      "type": "dns",
      "value": "a.build.kyma-project.io"
    }
  ],
  "authorizations": [
    "https://acme-staging-v02.api.letsencrypt.org/acme/authz-v3/53681668"
  ],
  "finalize": "https://acme-staging-v02.api.letsencrypt.org/acme/finalize/13474575/89387775"
}
2020-05-03 23:29:10,670:DEBUG:acme.client:Storing nonce: 00027x38Gybgzayi4zV9_9WGAAzkUUXVkpKTPuBJYWvSBYY
2020-05-03 23:29:10,671:DEBUG:acme.client:JWS payload:
b''
2020-05-03 23:29:10,674:DEBUG:acme.client:Sending POST request to https://acme-staging-v02.api.letsencrypt.org/acme/authz-v3/53681668:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS1zdGFnaW5nLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvYWNjdC8xMzQ3NDU3NSIsICJub25jZSI6ICIwMDAyN3gzOEd5Ymd6YXlpNHpWOV85V0dBQXprVVVYVmtwS1RQdUJKWVd2U0JZWSIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXN0YWdpbmctdjAyLmFwaS5sZXRzZW5jcnlwdC5vcmcvYWNtZS9hdXRoei12My81MzY4MTY2OCJ9",
  "signature": "DuIhANDGAcCj_ZyaJ4qpOBt2CpYU-Pqf-2mnzvLiKXcVaCyfPsce_mYJcyMPIL_m928RV7JFu6LwP7DiHfnx5JbYoAWYLBGsXSHOnNeVTwbhHG82UhTkV6jlfrfYoTQeD8nh91dS5UF80jN5nYb13fnkrFz7x0r_XM0hW3a9BJy1AsItO6qHN4gYHLuPJAiejtUPs1JaRuwQW1UfwDfHBHSHARFNH8HvojRl5fPSKJIxEeZlq8o9S77cc5SVbRKg-UFAxXYjzQITaDUgfIu3LWVB1b5HMF7tcu8Vu_QIpZ6IRGm3D-e5PwZol2_mFRcUV1TqfjP_cE8fqf55rQ0ucA",
  "payload": ""
}
2020-05-03 23:29:10,866:DEBUG:urllib3.connectionpool:https://acme-staging-v02.api.letsencrypt.org:443 "POST /acme/authz-v3/53681668 HTTP/1.1" 200 819
2020-05-03 23:29:10,868:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Sun, 03 May 2020 23:29:10 GMT
Content-Type: application/json
Content-Length: 819
Connection: keep-alive
Boulder-Requester: 13474575
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-staging-v02.api.letsencrypt.org/directory>;rel="index"
Replay-Nonce: 0001as7Tkfr9GfNoc5IMSSn9GIQO73y0ldgNt6WpFciCh9k
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "identifier": {
    "type": "dns",
    "value": "a.build.kyma-project.io"
  },
  "status": "pending",
  "expires": "2020-05-10T23:29:10Z",
  "challenges": [
    {
      "type": "http-01",
      "status": "pending",
      "url": "https://acme-staging-v02.api.letsencrypt.org/acme/chall-v3/53681668/XvwwEg",
      "token": "sPsF07cpaRhrCnbyaAxKjfjVleo-wSHw_nsVcCUfdg4"
    },
    {
      "type": "dns-01",
      "status": "pending",
      "url": "https://acme-staging-v02.api.letsencrypt.org/acme/chall-v3/53681668/4EKGEA",
      "token": "sPsF07cpaRhrCnbyaAxKjfjVleo-wSHw_nsVcCUfdg4"
    },
    {
      "type": "tls-alpn-01",
      "status": "pending",
      "url": "https://acme-staging-v02.api.letsencrypt.org/acme/chall-v3/53681668/h6Wo_A",
      "token": "sPsF07cpaRhrCnbyaAxKjfjVleo-wSHw_nsVcCUfdg4"
    }
  ]
}
2020-05-03 23:29:10,870:DEBUG:acme.client:Storing nonce: 0001as7Tkfr9GfNoc5IMSSn9GIQO73y0ldgNt6WpFciCh9k
2020-05-03 23:29:10,872:INFO:certbot._internal.auth_handler:Performing the following challenges:
2020-05-03 23:29:10,874:INFO:certbot._internal.auth_handler:dns-01 challenge for a.build.kyma-project.io
2020-05-03 23:29:10,880:INFO:certbot._internal.hooks:Running manual-auth-hook command: /bot/certbotauthenticator
2020-05-03 23:29:10,899:INFO:certbot._internal.auth_handler:Waiting for verification...
2020-05-03 23:29:10,901:DEBUG:acme.client:JWS payload:
b'{\n  "resource": "challenge",\n  "type": "dns-01"\n}'
2020-05-03 23:29:10,903:DEBUG:acme.client:Sending POST request to https://acme-staging-v02.api.letsencrypt.org/acme/chall-v3/53681668/4EKGEA:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS1zdGFnaW5nLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvYWNjdC8xMzQ3NDU3NSIsICJub25jZSI6ICIwMDAxYXM3VGtmcjlHZk5vYzVJTVNTbjlHSVFPNzN5MGxkZ050NldwRmNpQ2g5ayIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXN0YWdpbmctdjAyLmFwaS5sZXRzZW5jcnlwdC5vcmcvYWNtZS9jaGFsbC12My81MzY4MTY2OC80RUtHRUEifQ",
  "signature": "gP32RqwSDot4TKKQLf0IPvrWat3gffkYpK4hRkCsmNrVo0moowk73-bi2VLzLx25AQty_7jo2XrBz6UhNrVvSzWBKUXT7d7OYQoxrCRfRxl-1yStVvVCqSOeVaevhM0wz6Wil7euN0-OPiXqCbQjeKPdXqakijIpkFABGlBHJmgqD7N-BP0W6bOCT7AVr9gcqnLqN5acoh1nt0zha1Ezcs6Xai2tMU3fiefH7ZMqSbssRas_FyEKj7qgb6fV5MYBUm6WIjtChW1ul1NooLdLL4fdYDSn5DtREKqsavBuS1zopE329P5X8CnpbYR2P6y1AHmvHXZh7exwnguSWRyFMw",
  "payload": "ewogICJyZXNvdXJjZSI6ICJjaGFsbGVuZ2UiLAogICJ0eXBlIjogImRucy0wMSIKfQ"
}
2020-05-03 23:29:11,097:DEBUG:urllib3.connectionpool:https://acme-staging-v02.api.letsencrypt.org:443 "POST /acme/chall-v3/53681668/4EKGEA HTTP/1.1" 200 190
2020-05-03 23:29:11,100:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Sun, 03 May 2020 23:29:10 GMT
Content-Type: application/json
Content-Length: 190
Connection: keep-alive
Boulder-Requester: 13474575
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-staging-v02.api.letsencrypt.org/directory>;rel="index", <https://acme-staging-v02.api.letsencrypt.org/acme/authz-v3/53681668>;rel="up"
Location: https://acme-staging-v02.api.letsencrypt.org/acme/chall-v3/53681668/4EKGEA
Replay-Nonce: 0002cpaoFEX8Z_qMItTgxhNKy_2Em0Hx-RWSTvsRMcD5aUE
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "type": "dns-01",
  "status": "pending",
  "url": "https://acme-staging-v02.api.letsencrypt.org/acme/chall-v3/53681668/4EKGEA",
  "token": "sPsF07cpaRhrCnbyaAxKjfjVleo-wSHw_nsVcCUfdg4"
}
2020-05-03 23:29:11,102:DEBUG:acme.client:Storing nonce: 0002cpaoFEX8Z_qMItTgxhNKy_2Em0Hx-RWSTvsRMcD5aUE
2020-05-03 23:29:12,107:DEBUG:acme.client:JWS payload:
b''
2020-05-03 23:29:12,111:DEBUG:acme.client:Sending POST request to https://acme-staging-v02.api.letsencrypt.org/acme/authz-v3/53681668:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS1zdGFnaW5nLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvYWNjdC8xMzQ3NDU3NSIsICJub25jZSI6ICIwMDAyY3Bhb0ZFWDhaX3FNSXRUZ3hoTkt5XzJFbTBIeC1SV1NUdnNSTWNENWFVRSIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXN0YWdpbmctdjAyLmFwaS5sZXRzZW5jcnlwdC5vcmcvYWNtZS9hdXRoei12My81MzY4MTY2OCJ9",
  "signature": "nxwpzacgDJZv_pqQ6PTV_Tz-LCSwhkHfBYxYguTHlCUUdROWTA4BbsOcUr4oYMVZDnLmJCll0g1nIxl3GNy5iKgZv5NCCFtJW75Q4417HMOITUFoCTzon5IiwWZqjhSRDqaOBZeLHIXiDS9-2od5KoRiBF-re5dVpEvUoI8ZeEW50zdd5UXjSxeHAfhl1EMsq2L6vIGgYkDGc4MRTn_oo4FGP_ZJVA_9UQfDy57ETtM6VjBnUKGwV4B3-q9RuUwt3s7eev1tWZVrV-t_c015K4fCNDdlFDITVjsXjtkU5ojEy18IsXBmao35hwVxZAnC0otyF4cttXd5vBAptzhLaA",
  "payload": ""
}
2020-05-03 23:29:12,304:DEBUG:urllib3.connectionpool:https://acme-staging-v02.api.letsencrypt.org:443 "POST /acme/authz-v3/53681668 HTTP/1.1" 200 630
2020-05-03 23:29:12,306:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Sun, 03 May 2020 23:29:12 GMT
Content-Type: application/json
Content-Length: 630
Connection: keep-alive
Boulder-Requester: 13474575
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-staging-v02.api.letsencrypt.org/directory>;rel="index"
Replay-Nonce: 0001B1k_H2BP4QDp2Yeie-fYBbsWRhtJzu83BEgmnDNGsbs
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "identifier": {
    "type": "dns",
    "value": "a.build.kyma-project.io"
  },
  "status": "invalid",
  "expires": "2020-05-10T23:29:10Z",
  "challenges": [
    {
      "type": "dns-01",
      "status": "invalid",
      "error": {
        "type": "urn:ietf:params:acme:error:dns",
        "detail": "DNS problem: NXDOMAIN looking up TXT for _acme-challenge.a.build.kyma-project.io - check that a DNS record exists for this domain",
        "status": 400
      },
      "url": "https://acme-staging-v02.api.letsencrypt.org/acme/chall-v3/53681668/4EKGEA",
      "token": "sPsF07cpaRhrCnbyaAxKjfjVleo-wSHw_nsVcCUfdg4"
    }
  ]
}
2020-05-03 23:29:12,308:DEBUG:acme.client:Storing nonce: 0001B1k_H2BP4QDp2Yeie-fYBbsWRhtJzu83BEgmnDNGsbs
2020-05-03 23:29:12,309:WARNING:certbot._internal.auth_handler:Challenge failed for domain a.build.kyma-project.io
2020-05-03 23:29:12,311:INFO:certbot._internal.auth_handler:dns-01 challenge for a.build.kyma-project.io
2020-05-03 23:29:12,314:DEBUG:certbot._internal.reporter:Reporting to user: The following errors were reported by the server:

Domain: a.build.kyma-project.io
Type:   dns
Detail: DNS problem: NXDOMAIN looking up TXT for _acme-challenge.a.build.kyma-project.io - check that a DNS record exists for this domain
2020-05-03 23:29:12,316:DEBUG:certbot._internal.error_handler:Encountered exception:
Traceback (most recent call last):
  File "/opt/certbot/src/certbot/certbot/_internal/auth_handler.py", line 91, in handle_authorizations
    self._poll_authorizations(authzrs, max_retries, best_effort)
  File "/opt/certbot/src/certbot/certbot/_internal/auth_handler.py", line 180, in _poll_authorizations
    raise errors.AuthorizationError('Some challenges have failed.')
certbot.errors.AuthorizationError: Some challenges have failed.

2020-05-03 23:29:12,318:DEBUG:certbot._internal.error_handler:Calling registered functions
2020-05-03 23:29:12,320:INFO:certbot._internal.auth_handler:Cleaning up challenges
2020-05-03 23:29:12,322:INFO:certbot._internal.hooks:Running manual-cleanup-hook command: /bot/certbotauthenticator
2020-05-03 23:29:12,338:DEBUG:certbot._internal.log:Exiting abnormally:
Traceback (most recent call last):
  File "/usr/local/bin/certbot", line 11, in <module>
    load_entry_point('certbot', 'console_scripts', 'certbot')()
  File "/opt/certbot/src/certbot/certbot/main.py", line 15, in main
    return internal_main.main(cli_args)
  File "/opt/certbot/src/certbot/certbot/_internal/main.py", line 1347, in main
    return config.func(config, plugins)
  File "/opt/certbot/src/certbot/certbot/_internal/main.py", line 1233, in certonly
    lineage = _get_and_save_cert(le_client, config, domains, certname, lineage)
  File "/opt/certbot/src/certbot/certbot/_internal/main.py", line 121, in _get_and_save_cert
    lineage = le_client.obtain_and_enroll_certificate(domains, certname)
  File "/opt/certbot/src/certbot/certbot/_internal/client.py", line 410, in obtain_and_enroll_certificate
    cert, chain, key, _ = self.obtain_certificate(domains)
  File "/opt/certbot/src/certbot/certbot/_internal/client.py", line 344, in obtain_certificate
    orderr = self._get_order_and_authorizations(csr.data, self.config.allow_subset_of_names)
  File "/opt/certbot/src/certbot/certbot/_internal/client.py", line 391, in _get_order_and_authorizations
    authzr = self.auth_handler.handle_authorizations(orderr, best_effort)
  File "/opt/certbot/src/certbot/certbot/_internal/auth_handler.py", line 91, in handle_authorizations
    self._poll_authorizations(authzrs, max_retries, best_effort)
  File "/opt/certbot/src/certbot/certbot/_internal/auth_handler.py", line 180, in _poll_authorizations
    raise errors.AuthorizationError('Some challenges have failed.')
certbot.errors.AuthorizationError: Some challenges have failed.
