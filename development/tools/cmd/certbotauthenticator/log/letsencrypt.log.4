2020-05-04 11:55:35,566:DEBUG:certbot._internal.main:certbot version: 1.3.0
2020-05-04 11:55:35,566:DEBUG:certbot._internal.main:Arguments: ['--agree-tos', '--no-eff-email', '-m', 'przemek.pokrywka@gmail.com', '--server', 'https://acme-staging-v02.api.letsencrypt.org/directory', '--manual', '--manual-public-ip-logging-ok', '--preferred-challenges', 'dns', '--manual-auth-hook', '/bot/certbotauthenticator', '--manual-cleanup-hook', '/bot/certbotauthenticator -D', '-d', 'a.build.kyma-project.io.']
2020-05-04 11:55:35,566:DEBUG:certbot._internal.main:Discovered plugins: PluginsRegistry(PluginEntryPoint#manual,PluginEntryPoint#null,PluginEntryPoint#standalone,PluginEntryPoint#webroot)
2020-05-04 11:55:35,886:DEBUG:certbot._internal.log:Root logging level set at 20
2020-05-04 11:55:35,887:INFO:certbot._internal.log:Saving debug log to /var/log/letsencrypt/letsencrypt.log
2020-05-04 11:55:35,895:DEBUG:certbot._internal.plugins.selection:Requested authenticator manual and installer None
2020-05-04 11:55:35,908:DEBUG:certbot._internal.plugins.selection:Single candidate plugin: * manual
Description: Manual configuration or run your own shell scripts
Interfaces: IAuthenticator, IPlugin
Entry point: manual = certbot._internal.plugins.manual:Authenticator
Initialized: <certbot._internal.plugins.manual.Authenticator object at 0x7f76b8e850d0>
Prep: True
2020-05-04 11:55:35,910:DEBUG:certbot._internal.plugins.selection:Selected authenticator <certbot._internal.plugins.manual.Authenticator object at 0x7f76b8e850d0> and installer None
2020-05-04 11:55:35,912:INFO:certbot._internal.plugins.selection:Plugins selected: Authenticator manual, Installer None
2020-05-04 11:55:35,935:DEBUG:certbot._internal.main:Picked account: <Account(RegistrationResource(body=Registration(key=None, contact=(), agreement=None, status=None, terms_of_service_agreed=None, only_return_existing=None, external_account_binding=None), uri='https://acme-staging-v02.api.letsencrypt.org/acme/acct/13474575', new_authzr_uri=None, terms_of_service=None), 0ca10773bedaf0252bc041e7c5277c08, Meta(creation_dt=datetime.datetime(2020, 5, 3, 22, 46, 17, tzinfo=<UTC>), creation_host='1fe450f9cd72'))>
2020-05-04 11:55:35,936:DEBUG:acme.client:Sending GET request to https://acme-staging-v02.api.letsencrypt.org/directory.
2020-05-04 11:55:35,940:DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): acme-staging-v02.api.letsencrypt.org:443
2020-05-04 11:55:36,696:DEBUG:urllib3.connectionpool:https://acme-staging-v02.api.letsencrypt.org:443 "GET /directory HTTP/1.1" 200 724
2020-05-04 11:55:36,699:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Mon, 04 May 2020 11:55:36 GMT
Content-Type: application/json
Content-Length: 724
Connection: keep-alive
Cache-Control: public, max-age=0, no-cache
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "-a_dutq5NXw": "https://community.letsencrypt.org/t/adding-random-entries-to-the-directory/33417",
  "keyChange": "https://acme-staging-v02.api.letsencrypt.org/acme/key-change",
  "meta": {
    "caaIdentities": [
      "letsencrypt.org"
    ],
    "termsOfService": "https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf",
    "website": "https://letsencrypt.org/docs/staging-environment/"
  },
  "newAccount": "https://acme-staging-v02.api.letsencrypt.org/acme/new-acct",
  "newNonce": "https://acme-staging-v02.api.letsencrypt.org/acme/new-nonce",
  "newOrder": "https://acme-staging-v02.api.letsencrypt.org/acme/new-order",
  "revokeCert": "https://acme-staging-v02.api.letsencrypt.org/acme/revoke-cert"
}
2020-05-04 11:55:36,703:INFO:certbot._internal.main:Obtaining a new certificate
2020-05-04 11:55:36,793:DEBUG:certbot.crypto_util:Generating key (2048 bits): /etc/letsencrypt/keys/0022_key-certbot.pem
2020-05-04 11:55:36,809:DEBUG:certbot.crypto_util:Creating CSR: /etc/letsencrypt/csr/0022_csr-certbot.pem
2020-05-04 11:55:36,811:DEBUG:acme.client:Requesting fresh nonce
2020-05-04 11:55:36,813:DEBUG:acme.client:Sending HEAD request to https://acme-staging-v02.api.letsencrypt.org/acme/new-nonce.
2020-05-04 11:55:36,999:DEBUG:urllib3.connectionpool:https://acme-staging-v02.api.letsencrypt.org:443 "HEAD /acme/new-nonce HTTP/1.1" 200 0
2020-05-04 11:55:37,001:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Mon, 04 May 2020 11:55:36 GMT
Connection: keep-alive
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-staging-v02.api.letsencrypt.org/directory>;rel="index"
Replay-Nonce: 0001-DGKtA8WQfvh94YSGepfas7ejcT-5akFfKv6JDh8Q5U
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800


2020-05-04 11:55:37,003:DEBUG:acme.client:Storing nonce: 0001-DGKtA8WQfvh94YSGepfas7ejcT-5akFfKv6JDh8Q5U
2020-05-04 11:55:37,005:DEBUG:acme.client:JWS payload:
b'{\n  "identifiers": [\n    {\n      "type": "dns",\n      "value": "a.build.kyma-project.io"\n    }\n  ]\n}'
2020-05-04 11:55:37,008:DEBUG:acme.client:Sending POST request to https://acme-staging-v02.api.letsencrypt.org/acme/new-order:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS1zdGFnaW5nLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvYWNjdC8xMzQ3NDU3NSIsICJub25jZSI6ICIwMDAxLURHS3RBOFdRZnZoOTRZU0dlcGZhczdlamNULTVha0ZmS3Y2SkRoOFE1VSIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXN0YWdpbmctdjAyLmFwaS5sZXRzZW5jcnlwdC5vcmcvYWNtZS9uZXctb3JkZXIifQ",
  "signature": "ln5v4xKKVpEDVLbQWWOEc7YAdaD6c5S9xiYae1iaHI-OA4Hpk-EjAc2tUJhaX--piKORDQFHDdq4WSdElm16c5b8YjZFc4x4PTuf_3GjLzgeEC6Tx8If5GkJiAOewPqrbCNDFd6Xw0RSkp9sXMGn4g_CkoYxA9teoh_l_7j8tIxwrCPqwxfa-waAbJ3PQPwXwxi38wUjorFRWU2ieUd2CimFLU4n2wwXg3J8_980WNmmQgmmUxncdkxs8A5MfURgeKLAtS2TVp9-fYxLyGM3aBKt8NlUu0DRjndcXUb4I-p-m_6FoI-mCumSVk4lXWEt61uMGHnRJc6orNdJeRXjoA",
  "payload": "ewogICJpZGVudGlmaWVycyI6IFsKICAgIHsKICAgICAgInR5cGUiOiAiZG5zIiwKICAgICAgInZhbHVlIjogImEuYnVpbGQua3ltYS1wcm9qZWN0LmlvIgogICAgfQogIF0KfQ"
}
2020-05-04 11:55:37,221:DEBUG:urllib3.connectionpool:https://acme-staging-v02.api.letsencrypt.org:443 "POST /acme/new-order HTTP/1.1" 201 365
2020-05-04 11:55:37,223:DEBUG:acme.client:Received response:
HTTP 201
Server: nginx
Date: Mon, 04 May 2020 11:55:37 GMT
Content-Type: application/json
Content-Length: 365
Connection: keep-alive
Boulder-Requester: 13474575
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-staging-v02.api.letsencrypt.org/directory>;rel="index"
Location: https://acme-staging-v02.api.letsencrypt.org/acme/order/13474575/89527186
Replay-Nonce: 00028dDmS5JzvSJZTDp9kRMF1IDUEZtBK9gTtKE4OQJLgwM
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "status": "pending",
  "expires": "2020-05-11T11:55:37.118779466Z",
  "identifiers": [
    {
      "type": "dns",
      "value": "a.build.kyma-project.io"
    }
  ],
  "authorizations": [
    "https://acme-staging-v02.api.letsencrypt.org/acme/authz-v3/53834275"
  ],
  "finalize": "https://acme-staging-v02.api.letsencrypt.org/acme/finalize/13474575/89527186"
}
2020-05-04 11:55:37,224:DEBUG:acme.client:Storing nonce: 00028dDmS5JzvSJZTDp9kRMF1IDUEZtBK9gTtKE4OQJLgwM
2020-05-04 11:55:37,226:DEBUG:acme.client:JWS payload:
b''
2020-05-04 11:55:37,228:DEBUG:acme.client:Sending POST request to https://acme-staging-v02.api.letsencrypt.org/acme/authz-v3/53834275:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS1zdGFnaW5nLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvYWNjdC8xMzQ3NDU3NSIsICJub25jZSI6ICIwMDAyOGREbVM1Snp2U0paVERwOWtSTUYxSURVRVp0Qks5Z1R0S0U0T1FKTGd3TSIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXN0YWdpbmctdjAyLmFwaS5sZXRzZW5jcnlwdC5vcmcvYWNtZS9hdXRoei12My81MzgzNDI3NSJ9",
  "signature": "kusFUxPutMszWFIqcQevUwJaPmyjBt50UlkdtWOBq_uOfq1wKtVk1HsqX2ccoYqe0AIu1gCOiBy6ShrUxFwiAl1ZozKVQEvpUQSu2lSJ8uwNRGo8YLFD9mMWUMmnqR_AKN-qnI9KJuzhjmph_e93qxKHY410a06jbMz604Eic5DXM1l2R-VDi5uXnf4I_zOIZl2rwRuWMPA8pnlWmsXAkEBqZ-WE9itHU5SC_h8C99uMEFBOFwsYy-z10g70w8-4gVk2tlojr5EwK9yAzv6meq5x2LuVj6G5C4tQTERfZnAjiYPseTsGEjiptEXOMX1aJBsz2CguaxdikkO3inVpXg",
  "payload": ""
}
2020-05-04 11:55:37,418:DEBUG:urllib3.connectionpool:https://acme-staging-v02.api.letsencrypt.org:443 "POST /acme/authz-v3/53834275 HTTP/1.1" 200 819
2020-05-04 11:55:37,420:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Mon, 04 May 2020 11:55:37 GMT
Content-Type: application/json
Content-Length: 819
Connection: keep-alive
Boulder-Requester: 13474575
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-staging-v02.api.letsencrypt.org/directory>;rel="index"
Replay-Nonce: 0001WeZLs4pyZN8u1oAlsO9BHD-kQiR9cDkbUWtC0n11BSA
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "identifier": {
    "type": "dns",
    "value": "a.build.kyma-project.io"
  },
  "status": "pending",
  "expires": "2020-05-11T11:55:37Z",
  "challenges": [
    {
      "type": "http-01",
      "status": "pending",
      "url": "https://acme-staging-v02.api.letsencrypt.org/acme/chall-v3/53834275/8suhKA",
      "token": "n3BSo8_CwTC6gNnciDK39VWcfc6DyoqDSuDJo8w0qG0"
    },
    {
      "type": "dns-01",
      "status": "pending",
      "url": "https://acme-staging-v02.api.letsencrypt.org/acme/chall-v3/53834275/XtZX0A",
      "token": "n3BSo8_CwTC6gNnciDK39VWcfc6DyoqDSuDJo8w0qG0"
    },
    {
      "type": "tls-alpn-01",
      "status": "pending",
      "url": "https://acme-staging-v02.api.letsencrypt.org/acme/chall-v3/53834275/H35nMA",
      "token": "n3BSo8_CwTC6gNnciDK39VWcfc6DyoqDSuDJo8w0qG0"
    }
  ]
}
2020-05-04 11:55:37,421:DEBUG:acme.client:Storing nonce: 0001WeZLs4pyZN8u1oAlsO9BHD-kQiR9cDkbUWtC0n11BSA
2020-05-04 11:55:37,422:INFO:certbot._internal.auth_handler:Performing the following challenges:
2020-05-04 11:55:37,423:INFO:certbot._internal.auth_handler:dns-01 challenge for a.build.kyma-project.io
2020-05-04 11:55:37,427:INFO:certbot._internal.hooks:Running manual-auth-hook command: /bot/certbotauthenticator
2020-05-04 11:55:39,151:INFO:certbot._internal.hooks:Output from manual-auth-hook command certbotauthenticator:
recordadded

2020-05-04 11:55:39,157:INFO:certbot._internal.auth_handler:Waiting for verification...
2020-05-04 11:55:39,159:DEBUG:acme.client:JWS payload:
b'{\n  "resource": "challenge",\n  "type": "dns-01"\n}'
2020-05-04 11:55:39,164:DEBUG:acme.client:Sending POST request to https://acme-staging-v02.api.letsencrypt.org/acme/chall-v3/53834275/XtZX0A:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS1zdGFnaW5nLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvYWNjdC8xMzQ3NDU3NSIsICJub25jZSI6ICIwMDAxV2VaTHM0cHlaTjh1MW9BbHNPOUJIRC1rUWlSOWNEa2JVV3RDMG4xMUJTQSIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXN0YWdpbmctdjAyLmFwaS5sZXRzZW5jcnlwdC5vcmcvYWNtZS9jaGFsbC12My81MzgzNDI3NS9YdFpYMEEifQ",
  "signature": "TmkOEiGSiT8cs4vWi1cEGJbhOIveXoxPeiGeP3XCYH3Ms782NDzwk5LOXxoqoksg5TXqTP5rO_wZI-VuqRlF1LvbEmYZWgwbCvC5P5ubBaiJ2l5mP2S-ElOYnw7fFDgcV4l9n0ASC4SQDPQZpFPK-7WJU2oSy5Jh4HsegXszQS2X0YXQ0ke6Nb0e9AHJzqWQtThsvuy7lXae_n99mqDYT3PsC7zvuXoOwhfynypZcaDLI32tBNCmWgPrDhZdziE1xH9feQn3kN0iMwiuZ21j3hExCmv9yGKD8DNJg-fs_tdYbijZ4bwYk3pyXAnsBEYGGoOkvy_ytoNAwIsYkPQ2bg",
  "payload": "ewogICJyZXNvdXJjZSI6ICJjaGFsbGVuZ2UiLAogICJ0eXBlIjogImRucy0wMSIKfQ"
}
2020-05-04 11:55:39,355:DEBUG:urllib3.connectionpool:https://acme-staging-v02.api.letsencrypt.org:443 "POST /acme/chall-v3/53834275/XtZX0A HTTP/1.1" 200 190
2020-05-04 11:55:39,357:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Mon, 04 May 2020 11:55:39 GMT
Content-Type: application/json
Content-Length: 190
Connection: keep-alive
Boulder-Requester: 13474575
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-staging-v02.api.letsencrypt.org/directory>;rel="index", <https://acme-staging-v02.api.letsencrypt.org/acme/authz-v3/53834275>;rel="up"
Location: https://acme-staging-v02.api.letsencrypt.org/acme/chall-v3/53834275/XtZX0A
Replay-Nonce: 0002VK-IepJh8woTCR4PmPifTvo_uwnHHduZfsMnqrDesR4
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "type": "dns-01",
  "status": "pending",
  "url": "https://acme-staging-v02.api.letsencrypt.org/acme/chall-v3/53834275/XtZX0A",
  "token": "n3BSo8_CwTC6gNnciDK39VWcfc6DyoqDSuDJo8w0qG0"
}
2020-05-04 11:55:39,358:DEBUG:acme.client:Storing nonce: 0002VK-IepJh8woTCR4PmPifTvo_uwnHHduZfsMnqrDesR4
2020-05-04 11:55:40,361:DEBUG:acme.client:JWS payload:
b''
2020-05-04 11:55:40,364:DEBUG:acme.client:Sending POST request to https://acme-staging-v02.api.letsencrypt.org/acme/authz-v3/53834275:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS1zdGFnaW5nLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvYWNjdC8xMzQ3NDU3NSIsICJub25jZSI6ICIwMDAyVkstSWVwSmg4d29UQ1I0UG1QaWZUdm9fdXduSEhkdVpmc01ucXJEZXNSNCIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXN0YWdpbmctdjAyLmFwaS5sZXRzZW5jcnlwdC5vcmcvYWNtZS9hdXRoei12My81MzgzNDI3NSJ9",
  "signature": "hedU69BNWX182HGIJFUq3D4igk1-49ev77n39dMzfEyy84D_DGrwWm7128SLORBtHy06S04VjQlnRlnA0Uw7oSZPYuNwHAC8PIodLBLg3DBbtEZFb6FJSlBb1DwEHTYhECi9LWvl4g5DUhRnYZl4jUm54-IgrETvekU0cBVJWEjFMrn3Xacjo-lD7tbjOpGnDg4HgHTuClfz-cMl51NsJbO6UYBWhXnzSCFtCRi0cwYCp03_sRozGvHHZO2j41qVUFaQzJCZnOnn3GCT7v0f384-PWLsnOOgknBu6Hv2xLaEy7Mub9CeQe9wfdSn640-QQs9ptSa2NF_rSet1ZZVXA",
  "payload": ""
}
2020-05-04 11:55:40,554:DEBUG:urllib3.connectionpool:https://acme-staging-v02.api.letsencrypt.org:443 "POST /acme/authz-v3/53834275 HTTP/1.1" 200 630
2020-05-04 11:55:40,556:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Mon, 04 May 2020 11:55:40 GMT
Content-Type: application/json
Content-Length: 630
Connection: keep-alive
Boulder-Requester: 13474575
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-staging-v02.api.letsencrypt.org/directory>;rel="index"
Replay-Nonce: 00025DkqNGnw8N_IPlBuYy0cZDY_AJmEVvngoNnhyGQmQIY
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "identifier": {
    "type": "dns",
    "value": "a.build.kyma-project.io"
  },
  "status": "invalid",
  "expires": "2020-05-11T11:55:37Z",
  "challenges": [
    {
      "type": "dns-01",
      "status": "invalid",
      "error": {
        "type": "urn:ietf:params:acme:error:dns",
        "detail": "DNS problem: NXDOMAIN looking up TXT for _acme-challenge.a.build.kyma-project.io - check that a DNS record exists for this domain",
        "status": 400
      },
      "url": "https://acme-staging-v02.api.letsencrypt.org/acme/chall-v3/53834275/XtZX0A",
      "token": "n3BSo8_CwTC6gNnciDK39VWcfc6DyoqDSuDJo8w0qG0"
    }
  ]
}
2020-05-04 11:55:40,558:DEBUG:acme.client:Storing nonce: 00025DkqNGnw8N_IPlBuYy0cZDY_AJmEVvngoNnhyGQmQIY
2020-05-04 11:55:40,559:WARNING:certbot._internal.auth_handler:Challenge failed for domain a.build.kyma-project.io
2020-05-04 11:55:40,561:INFO:certbot._internal.auth_handler:dns-01 challenge for a.build.kyma-project.io
2020-05-04 11:55:40,564:DEBUG:certbot._internal.reporter:Reporting to user: The following errors were reported by the server:

Domain: a.build.kyma-project.io
Type:   dns
Detail: DNS problem: NXDOMAIN looking up TXT for _acme-challenge.a.build.kyma-project.io - check that a DNS record exists for this domain
2020-05-04 11:55:40,568:DEBUG:certbot._internal.error_handler:Encountered exception:
Traceback (most recent call last):
  File "/opt/certbot/src/certbot/certbot/_internal/auth_handler.py", line 91, in handle_authorizations
    self._poll_authorizations(authzrs, max_retries, best_effort)
  File "/opt/certbot/src/certbot/certbot/_internal/auth_handler.py", line 180, in _poll_authorizations
    raise errors.AuthorizationError('Some challenges have failed.')
certbot.errors.AuthorizationError: Some challenges have failed.

2020-05-04 11:55:40,569:DEBUG:certbot._internal.error_handler:Calling registered functions
2020-05-04 11:55:40,571:INFO:certbot._internal.auth_handler:Cleaning up challenges
2020-05-04 11:55:40,572:INFO:certbot._internal.hooks:Running manual-cleanup-hook command: /bot/certbotauthenticator -D
2020-05-04 11:55:42,117:INFO:certbot._internal.hooks:Output from manual-cleanup-hook command certbotauthenticator:
time="2020-05-04T11:55:42Z" level=info msg="Record deleted. DNS authentication finished."

2020-05-04 11:55:42,121:DEBUG:certbot._internal.log:Exiting abnormally:
Traceback (most recent call last):
  File "/usr/local/bin/certbot", line 11, in <module>
    load_entry_point('certbot', 'console_scripts', 'certbot')()
  File "/opt/certbot/src/certbot/certbot/main.py", line 15, in main
    return internal_main.main(cli_args)
  File "/opt/certbot/src/certbot/certbot/_internal/main.py", line 1347, in main
    return config.func(config, plugins)
  File "/opt/certbot/src/certbot/certbot/_internal/main.py", line 1233, in certonly
    lineage = _get_and_save_cert(le_client, config, domains, certname, lineage)
  File "/opt/certbot/src/certbot/certbot/_internal/main.py", line 121, in _get_and_save_cert
    lineage = le_client.obtain_and_enroll_certificate(domains, certname)
  File "/opt/certbot/src/certbot/certbot/_internal/client.py", line 410, in obtain_and_enroll_certificate
    cert, chain, key, _ = self.obtain_certificate(domains)
  File "/opt/certbot/src/certbot/certbot/_internal/client.py", line 344, in obtain_certificate
    orderr = self._get_order_and_authorizations(csr.data, self.config.allow_subset_of_names)
  File "/opt/certbot/src/certbot/certbot/_internal/client.py", line 391, in _get_order_and_authorizations
    authzr = self.auth_handler.handle_authorizations(orderr, best_effort)
  File "/opt/certbot/src/certbot/certbot/_internal/auth_handler.py", line 91, in handle_authorizations
    self._poll_authorizations(authzrs, max_retries, best_effort)
  File "/opt/certbot/src/certbot/certbot/_internal/auth_handler.py", line 180, in _poll_authorizations
    raise errors.AuthorizationError('Some challenges have failed.')
certbot.errors.AuthorizationError: Some challenges have failed.
