# Constraint to allow only image-builder tool trusted usage on Prow cluster run as image-builder service account identity.
apiVersion: constraints.gatekeeper.sh/v1beta1
kind: SecretTrustedUsage
metadata:
  name: signify
spec:
  enforcementAction: deny
  match:
    kinds:
      - apiGroups: [""]
        kinds: ["Pod"]
  parameters:
    restrictedSecrets:
      - signify-dev-secret
      - signify-prod-secret
    trustedImages:
      # sidecar
      - image: "gcr.io/k8s-prow/sidecar:*"
        command: []
        args: []
