go_buildpack_v20181119: &go_buildpack_v20181119 eu.gcr.io/kyma-project/prow/test-infra/buildpack-golang:v20181119-afd3fbd
go_releases: &go_releases
  - name: '1.4'
    buildpack: *go_buildpack_v20181119
  - name: '1.3'
    buildpack: *go_buildpack_v20181119
  - name: '1.2'
    buildpack: *go_buildpack_v20181119

kubebuilder_buildpack_v20190208: &kubebuilder_buildpack_v20190208 eu.gcr.io/kyma-project/test-infra/buildpack-golang-kubebuilder:v20190208-813daef
kubebuilder_releases: &kubebuilder_releases
  - name: '1.4'
    buildpack: *kubebuilder_buildpack_v20190208
  - name: '1.3'
    buildpack: *kubebuilder_buildpack_v20190208
  - name: '1.2'
    buildpack: *kubebuilder_buildpack_v20190208

bootstrap_buildpack_v20181121: &bootstrap_buildpack_v20181121 eu.gcr.io/kyma-project/prow/test-infra/bootstrap:v20181121-f3ea5ce
bootstrap_releases: &bootstrap_releases
  - name: '1.4'
    buildpack: *bootstrap_buildpack_v20181121
  - name: '1.3'
    buildpack: *bootstrap_buildpack_v20181121
  - name: '1.2'
    buildpack: *bootstrap_buildpack_v20181121

kyma_component: &kyma_component
  repository: github.com/kyma-project/kyma
  preset: build

go_kyma_component: &go_kyma_component
  <<: *kyma_component
  master:
    buildpack: *go_buildpack_v20181119
  releases: *go_releases

kubebuilder_kyma_component: &kubebuilder_kyma_component
  <<: *kyma_component
  master:
    buildpack: *kubebuilder_buildpack_v20190208
  releases: *kubebuilder_releases
  resources:
    memory: 2.5Gi
    cpu: 2

bootstrap_kyma_component: &bootstrap_kyma_component
  <<: *kyma_component
  master:
    buildpack: *bootstrap_buildpack_v20181121
  releases: *bootstrap_releases

templates:
  - from: templates/component.yaml
    render:
      - to: ../jobs/kyma/components/api-controller/api-controller.yaml
        values:
          <<: *go_kyma_component
          path: components/api-controller
      - to: ../jobs/kyma/components/apiserver-proxy/apiserver-proxy.yaml
        values:
          <<: *go_kyma_component
          path: components/apiserver-proxy
      - to: ../jobs/kyma/tests/acceptance/acceptance.yaml
        values:
          <<: *go_kyma_component
          path: tests/acceptance
      - to: ../jobs/kyma/tests/integration/cluster-users/cluster-users-integration.yaml
        values:
          <<: *bootstrap_kyma_component
          path: tests/integration/cluster-users
          resources:
            cpu: 0.2
            memory: 256Mi
      - to: ../jobs/kyma/components/xip-patch/xip-patch.yaml
        values:
          <<: *bootstrap_kyma_component
          path: components/xip-patch
      - to: ../jobs/kyma/components/asset-store-controller-manager/asset-store-controller-manager.yaml
        values:
          <<: *kubebuilder_kyma_component
          path: components/asset-store-controller-manager
      - to: ../jobs/console/core/core.yaml
        values:
          repository: github.com/kyma-project/console
          path: core
          preset: build-console
          resources:
            cpu: 1.5
            memory: 2Gi
          master:
            buildpack: eu.gcr.io/kyma-project/prow/test-infra/buildpack-node-chromium:v20181207-d46c013
