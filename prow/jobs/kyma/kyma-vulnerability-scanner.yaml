test_infra_ref: &test_infra_ref
  org: kyma-project
  repo: test-infra
  path_alias: github.com/kyma-project/test-infra

kyma_ref: &kyma_ref
  org: kyma-project
  repo: kyma
  path_alias: github.com/kyma-project/kyma

periodics:
- name: kyma-vulnerabilites-scan
  cron: "0 7-16 * * 1-5" # “At minute 30 past every hour from 7 through 16 on every day-of-week from Monday through Friday.” - only for testing
  #cron: "0 7 * * 1" # "At 07:00 on Monday." - the proper cron - remember to change it also in tests!!!
  labels:
    preset-sap-slack-bot-token: "true"
    preset-kyma-snyk-token: "true"
  decorate: true
  extra_refs:
    - <<: *test_infra_ref
      base_ref: master
    - <<: *kyma_ref
      base_ref: master
  spec:
    containers:
      - image: eu.gcr.io/kyma-project/test-infra/vulnerability-scanner:v20190226-14fa550
        command:
          - "bash"
        env:
          - name: KYMA_PROJECT_DIR
            value: "/home/prow/go/src/github.com/kyma-project"
        args:
          - "-c"
          - "${KYMA_PROJECT_DIR}/test-infra/development/vulnerabilities-scanner.sh"
        resources:
          requests:
            memory: 100Mi
            cpu: 50m