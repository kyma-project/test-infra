# Code generated by rendertemplates. DO NOT EDIT.


presubmits: # runs on PRs
  kyma-project/kyma:
    - name: pre-main-kyma-integration-k3d
      annotations:
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-submit"
        pipeline.type: "integration"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "pre-main-kyma-integration-k3d"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-pr: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-central-app-connectivity-enabled: "true"
        preset-sa-vm-kyma-integration: "true"
      run_if_changed: '^((tests/fast-integration\S+|resources\S+|installation\S+|tools/kyma-installer\S+)(\.[^.][^.][^.]+$|\.[^.][^dD]$|\.[^mM][^.]$|\.[^.]$|/[^.]+$))'
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: untrusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-incubator
          repo: local-kyma
          path_alias: github.com/kyma-incubator/local-kyma
          base_ref: main
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: pre-main-kyma-integration-k3d-app-gateway
      annotations:
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-submit"
        pipeline.type: "integration"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "pre-main-kyma-integration-k3d-app-gateway"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-pr: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-app-connector-tests-app-gateway: "true"
        preset-kyma-integration-central-app-connectivity-enabled: "true"
        preset-sa-vm-kyma-integration: "true"
      run_if_changed: '^((resources/application-connector\S+|installation\S+|tests/components/application-connector\S+|resources/istio\S+|resources/istio-resources\S+)(\.[^.][^.][^.]+$|\.[^.][^dD]$|\.[^mM][^.]$|\.[^.]$|/[^.]+$))'
      optional: true
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: untrusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-incubator
          repo: local-kyma
          path_alias: github.com/kyma-incubator/local-kyma
          base_ref: main
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: pre-main-kyma-integration-k3d-app-conn-validator
      annotations:
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-submit"
        pipeline.type: "integration"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "pre-main-kyma-integration-k3d-app-conn-validator"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-pr: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-app-connector-tests-app-validator: "true"
        preset-kyma-integration-central-app-connectivity-enabled: "true"
        preset-sa-vm-kyma-integration: "true"
      run_if_changed: '^((resources/application-connector\S+|installation\S+|tests/components/application-connector\S+|resources/istio\S+|resources/istio-resources\S+)(\.[^.][^.][^.]+$|\.[^.][^dD]$|\.[^mM][^.]$|\.[^.]$|/[^.]+$))'
      optional: true
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: untrusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-incubator
          repo: local-kyma
          path_alias: github.com/kyma-incubator/local-kyma
          base_ref: main
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: pre-main-kyma-integration-k3d-runtime-agent
      annotations:
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-submit"
        pipeline.type: "integration"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "pre-main-kyma-integration-k3d-runtime-agent"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-pr: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-app-connector-tests-runtime-agent: "true"
        preset-kyma-integration-central-app-connectivity-enabled: "true"
        preset-kyma-integration-compass-dev: "true"
        preset-sa-vm-kyma-integration: "true"
      run_if_changed: '^((resources/compass-runtime-agent\S+|installation\S+|tests/components/application-connector\S+|resources/istio\S+|resources/istio-resources\S+)(\.[^.][^.][^.]+$|\.[^.][^dD]$|\.[^mM][^.]$|\.[^.]$|/[^.]+$))'
      optional: true
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: untrusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-incubator
          repo: local-kyma
          path_alias: github.com/kyma-incubator/local-kyma
          base_ref: main
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: pre-main-kyma-integration-k3d-central-app-connectivity-compass
      annotations:
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-submit"
        pipeline.type: "integration"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "pre-main-kyma-integration-k3d-central-app-connectivity-compass"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-pr: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-central-app-connectivity-enabled: "true"
        preset-kyma-integration-compass-dev: "true"
        preset-kyma-integration-compass-enabled: "true"
        preset-sa-vm-kyma-integration: "true"
      optional: true
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: untrusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-incubator
          repo: local-kyma
          path_alias: github.com/kyma-incubator/local-kyma
          base_ref: main
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: pre-main-serverless-integration-k3s
      annotations:
        pipeline.clusterprovisioning: "k3s"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3s"
        pipeline.test: "helm serverless-test"
        pipeline.trigger: "pr-submit"
        pipeline.type: "integration"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "pre-main-serverless-integration-k3s"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-pr: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-sa-vm-kyma-integration: "true"
      run_if_changed: '^((resources/serverless\S+)(\.[^.][^.][^.]+$|\.[^.][^dD]$|\.[^mM][^.]$|\.[^.]$|/[^.]+$))'
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: untrusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-serverless-k3s.sh"
            env:
              - name: INTEGRATION_SUITE
                value: "serverless-integration"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: pre-main-kyma-integration-k3d-telemetry
      annotations:
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-submit"
        pipeline.type: "integration"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "pre-main-kyma-integration-k3d-telemetry"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-pr: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-telemetry-enabled: "true"
        preset-kyma-integration-telemetry-tracing-enabled: "true"
        preset-sa-vm-kyma-integration: "true"
      run_if_changed: '^resources/telemetry/|^installation/resources/crds/telemetry/|^tests/fast-integration/telemetry-test/'
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: untrusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            resources:
              requests:
                memory: 3Gi
                cpu: 2
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: pre-main-kyma-eval-istio-integration-k3d
      annotations:
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-submit"
        pipeline.type: "integration"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "pre-main-kyma-eval-istio-integration-k3d"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-pr: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-istio-evaluation: "true"
        preset-sa-vm-kyma-integration: "true"
      run_if_changed: '(^resources/istio/.*)|(^resources/istio-resources/.*)|(^tests/components/istio/.*)'
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: untrusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            resources:
              requests:
                memory: 3Gi
                cpu: 2
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: pre-main-kyma-prod-istio-integration-k3d
      annotations:
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-submit"
        pipeline.type: "integration"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "pre-main-kyma-prod-istio-integration-k3d"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-pr: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-istio-production: "true"
        preset-sa-vm-kyma-integration: "true"
      run_if_changed: '(^resources/istio/.*)|(^resources/istio-resources/.*)|(^tests/components/istio/.*)'
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: untrusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            resources:
              requests:
                memory: 3Gi
                cpu: 2
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: pre-main-kyma-istio-reconcilation-k3d
      annotations:
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-submit"
        pipeline.type: "integration"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "pre-main-kyma-istio-reconcilation-k3d"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-pr: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-istio-production: "true"
        preset-sa-vm-kyma-integration: "true"
      run_if_changed: '(^resources/istio/.*)|(^resources/istio-resources/.*)|(^tests/components/istio/.*)'
      optional: true
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: untrusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            env:
              - name: RECONCILATION_TEST
                value: "true"
            resources:
              requests:
                memory: 3Gi
                cpu: 2
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: pre-main-kyma-api-gateway-integration-k3d
      annotations:
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-submit"
        pipeline.type: "integration"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "pre-main-kyma-api-gateway-integration-k3d"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-pr: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-sa-vm-kyma-integration: "true"
      run_if_changed: '^((tests/components/api-gateway\S+|resources/api-gateway\S+)(\.[^.][^.][^.]+$|\.[^.][^dD]$|\.[^mM][^.]$|\.[^.]$|/[^.]+$))'
      optional: true
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: untrusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            env:
              - name: API_GATEWAY_INTEGRATION
                value: "true"
              - name: TEST_ORY_IMAGE
                value: "eu.gcr.io/kyma-project/incubator/test-hydra-login-consent:d6e6d3bc"
            resources:
              requests:
                memory: 3Gi
                cpu: 2
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
  
postsubmits: # runs on main
  kyma-project/kyma:
    - name: post-main-kyma-integration-k3d
      annotations:
        description: "Kyma integration job on k3d."
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-merge"
        pipeline.type: "integration"
        testgrid-dashboards: "kyma_integration"
        testgrid-days-of-results: "60"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "post-main-kyma-integration-k3d"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-main: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-central-app-connectivity-enabled: "true"
        preset-sa-vm-kyma-integration: "true"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-incubator
          repo: local-kyma
          path_alias: github.com/kyma-incubator/local-kyma
          base_ref: main
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: post-main-kyma-integration-k3d-app-gateway
      annotations:
        description: "Kyma integration job on k3d for testing application gateway."
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-merge"
        pipeline.type: "integration"
        testgrid-dashboards: "kyma_integration"
        testgrid-days-of-results: "60"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "post-main-kyma-integration-k3d-app-gateway"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-main: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-app-connector-tests-app-gateway: "true"
        preset-kyma-integration-central-app-connectivity-enabled: "true"
        preset-sa-vm-kyma-integration: "true"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-incubator
          repo: local-kyma
          path_alias: github.com/kyma-incubator/local-kyma
          base_ref: main
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: post-main-kyma-integration-k3d-app-conn-validator
      annotations:
        description: "Kyma integration job on k3d for testing application connectivity validator."
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-merge"
        pipeline.type: "integration"
        testgrid-dashboards: "kyma_integration"
        testgrid-days-of-results: "60"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "post-main-kyma-integration-k3d-app-conn-validator"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-main: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-app-connector-tests-app-validator: "true"
        preset-kyma-integration-central-app-connectivity-enabled: "true"
        preset-sa-vm-kyma-integration: "true"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-incubator
          repo: local-kyma
          path_alias: github.com/kyma-incubator/local-kyma
          base_ref: main
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: post-main-kyma-integration-k3d-runtime-agent
      annotations:
        description: "Kyma integration job on k3d for testing compass runtime agent."
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-merge"
        pipeline.type: "integration"
        testgrid-dashboards: "kyma_integration"
        testgrid-days-of-results: "60"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "post-main-kyma-integration-k3d-runtime-agent"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-main: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-app-connector-tests-runtime-agent: "true"
        preset-kyma-integration-central-app-connectivity-enabled: "true"
        preset-kyma-integration-compass-dev: "true"
        preset-sa-vm-kyma-integration: "true"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-incubator
          repo: local-kyma
          path_alias: github.com/kyma-incubator/local-kyma
          base_ref: main
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: post-main-kyma-integration-k3d-telemetry
      annotations:
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-merge"
        pipeline.type: "integration"
        testgrid-create-test-group: "false"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "post-main-kyma-integration-k3d-telemetry"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-main: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-telemetry-enabled: "true"
        preset-kyma-integration-telemetry-tracing-enabled: "true"
        preset-sa-vm-kyma-integration: "true"
      run_if_changed: '^resources/telemetry/|^installation/resources/crds/telemetry/|^tests/fast-integration/telemetry-test/'
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            resources:
              requests:
                memory: 3Gi
                cpu: 2
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: post-main-k3d-k8s-preview
      annotations:
        description: "Kyma integration job on k3d to test kyma on latest k8s version."
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "pr-merge"
        pipeline.type: "integration"
        testgrid-dashboards: "kyma_integration"
        testgrid-days-of-results: "60"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "post-main-k3d-k8s-preview"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-main: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-sa-vm-kyma-integration: "true"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      max_concurrency: 10
      branches:
        - ^master$
        - ^main$
      extra_refs:
        - org: kyma-incubator
          repo: local-kyma
          path_alias: github.com/kyma-incubator/local-kyma
          base_ref: main
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            env:
              - name: K8S_VERSION
                value: "1.25.3"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
  
periodics: # runs on schedule
    - name: utilities-kyma-integration-cleaner
      annotations:
        pipeline.trigger: "periodic"
        pipeline.type: "integration"
        testgrid-create-test-group: "false"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "utilities-kyma-integration-cleaner"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-gc-project-env: "true"
        preset-sa-vm-kyma-integration: "true"
      cron: "30 * * * *"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/prow/cleaner:0.0.1"
            securityContext:
              privileged: true
            command:
              - "./cleaner.sh"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: orphaned-assetstore-gcp-bucket-cleaner
      annotations:
        pipeline.trigger: "periodic"
        pipeline.type: "integration"
        testgrid-create-test-group: "false"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "orphaned-assetstore-gcp-bucket-cleaner"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-gc-project-env: "true"
        preset-sa-prow-job-resource-cleaner: "true"
      cron: "00 00 * * *"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/prow-tools:v20221213-56b008fb"
            securityContext:
              privileged: true
            command:
              - "bash"
            args:
              - "-c"
              - "prow/scripts/assetstore-gcp-bucket-cleaner.sh -project=${CLOUDSDK_CORE_PROJECT}"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: orphaned-disks-cleaner
      annotations:
        pipeline.trigger: "periodic"
        pipeline.type: "integration"
        testgrid-create-test-group: "false"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "orphaned-disks-cleaner"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-gc-project-env: "true"
        preset-sa-gke-kyma-integration: "true"
      cron: "30 * * * *"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/prow-tools:v20221213-56b008fb"
            securityContext:
              privileged: true
            command:
              - "bash"
            args:
              - "-c"
              - "/prow-tools/diskscollector -project=${CLOUDSDK_CORE_PROJECT} -dryRun=false -diskNameRegex='^gke-'"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: orphaned-ips-cleaner
      annotations:
        pipeline.trigger: "periodic"
        pipeline.type: "integration"
        testgrid-create-test-group: "false"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "orphaned-ips-cleaner"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-gc-project-env: "true"
        preset-sa-gke-kyma-integration: "true"
      cron: "0 1 * * *"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/prow-tools:v20221213-56b008fb"
            securityContext:
              privileged: true
            command:
              - "bash"
            args:
              - "-c"
              - "/prow-tools/ipcleaner -project=${CLOUDSDK_CORE_PROJECT} -dry-run=false -ip-exclude-name-regex='^nightly|nightly-(.*)|weekly|weekly-(.*)|nat-auto-ip'"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: orphaned-clusters-cleaner
      annotations:
        pipeline.trigger: "periodic"
        pipeline.type: "integration"
        testgrid-create-test-group: "false"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "orphaned-clusters-cleaner"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-gc-project-env: "true"
        preset-sa-gke-kyma-integration: "true"
      cron: "0 * * * *"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/prow-tools:v20221213-56b008fb"
            securityContext:
              privileged: true
            command:
              - "bash"
            args:
              - "-c"
              - "/prow-tools/clusterscollector -project=${CLOUDSDK_CORE_PROJECT} -dryRun=false -excluded-clusters=kyma-prow,workload-kyma-prow,nightly,weekly,nightly-20,nightly-21,nightly-22"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: orphaned-vms-cleaner
      annotations:
        pipeline.trigger: "periodic"
        pipeline.type: "integration"
        testgrid-create-test-group: "false"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "orphaned-vms-cleaner"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-gc-project-env: "true"
        preset-sa-gke-kyma-integration: "true"
      cron: "15,45 * * * *"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/prow-tools:v20221213-56b008fb"
            securityContext:
              privileged: true
            command:
              - "bash"
            args:
              - "-c"
              - "/prow-tools/vmscollector -project=${CLOUDSDK_CORE_PROJECT} -vmNameRegexp='gke-nightly-.*|gke-weekly.*|shoot--kyma-prow.*|gke-gke-release-.*' -jobLabelRegexp='kyma-gke-nightly|kyma-gke-nightly-.*|kyma-gke-weekly|kyma-gke-weekly-.*|post-rel.*-kyma-release-candidate' -dryRun=false"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: orphaned-loadbalancer-cleaner
      annotations:
        pipeline.trigger: "periodic"
        pipeline.type: "integration"
        testgrid-create-test-group: "false"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "orphaned-loadbalancer-cleaner"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-gc-project-env: "true"
        preset-sa-gke-kyma-integration: "true"
      cron: "15 * * * *"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/prow-tools:v20221213-56b008fb"
            securityContext:
              privileged: true
            command:
              - "bash"
            args:
              - "-c"
              - "/prow-tools/orphanremover -project=${CLOUDSDK_CORE_PROJECT} -dryRun=false"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: orphaned-dns-cleaner
      annotations:
        pipeline.trigger: "periodic"
        pipeline.type: "integration"
        testgrid-create-test-group: "false"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "orphaned-dns-cleaner"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-gc-compute-envs: "true"
        preset-gc-project-env: "true"
        preset-sa-gke-kyma-integration: "true"
      cron: "30 * * * *"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/prow-tools:v20221213-56b008fb"
            securityContext:
              privileged: true
            command:
              - "bash"
            args:
              - "-c"
              - "/prow-tools/dnscollector -project=${CLOUDSDK_CORE_PROJECT} -dnsZone=${CLOUDSDK_DNS_ZONE_NAME} -ageInHours=2 -regions=${CLOUDSDK_COMPUTE_REGION} -dryRun=false"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: gcr-cleaner-prow-workloads
      annotations:
        pipeline.trigger: "periodic"
        pipeline.type: "integration"
        testgrid-create-test-group: "false"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "gcr-cleaner-prow-workloads"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-sa-gke-kyma-integration: "true"
      cron: "0 1 * * *"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/prow-tools:v20221213-56b008fb"
            securityContext:
              privileged: true
            command:
              - "bash"
            args:
              - "-c"
              - "/prow-tools/gcrcleaner --repository=eu.gcr.io/sap-kyma-prow-workloads --age-in-hours=168 --dry-run=false"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: github-issues
      annotations:
        pipeline.trigger: "periodic"
        pipeline.type: "integration"
        testgrid-create-test-group: "false"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "github-issues"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-bot-github-sap-token: "true"
        preset-bot-github-token: "true"
        preset-sa-prow-job-github-issues: "true"
      cron: "0 6 * * *"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/prow-tools:v20221213-56b008fb"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/github-issues.sh"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: serverless-function-metrics-generator
      annotations:
        description: "Serverless function metrics generator"
        pipeline.platform: "gke"
        pipeline.test: "Serverless function metrics"
        pipeline.trigger: "nightly"
        testgrid-create-test-group: "false"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "serverless-function-metrics-generator"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-gc-compute-envs: "true"
        preset-gc-project-env: "true"
        preset-sa-gke-kyma-integration: "true"
      cron: "0 0,12 * * *"
      skip_report: false
      decorate: true
      cluster: untrusted-workload
      extra_refs:
        - org: kyma-project
          repo: kyma
          path_alias: github.com/kyma-project/kyma
          base_ref: main
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/cluster-integration/kyma-serverless-metrics-nightly.sh"
            env:
              - name: CLOUDSDK_COMPUTE_ZONE
                value: "europe-west4-b"
              - name: CLUSTER_PROVIDER
                value: "gcp"
              - name: INPUT_CLUSTER_NAME
                value: "nightly"
              - name: PROVISION_REGIONAL_CLUSTER
                value: "true"
            resources:
              requests:
                memory: 3Gi
                cpu: 2
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: serverless-git-auth-integration-k3s-nightly
      annotations:
        description: "Serverless git-function authentication nightly integration tests"
        pipeline.clusterprovisioning: "k3s"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3s"
        pipeline.test: "helm serverless-test"
        pipeline.trigger: "periodic"
        pipeline.type: "integration"
        testgrid-create-test-group: "false"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "serverless-git-auth-integration-k3s-nightly"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-main: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-sa-vm-kyma-integration: "true"
        preset-serverless-git-auth: "true"
      cron: "0 3 * * 1-5"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: untrusted-workload
      extra_refs:
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-serverless-k3s.sh"
            env:
              - name: INTEGRATION_SUITE
                value: "git-auth-integration"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: kyma-upgrade-k3d-kyma2-to-main
      annotations:
        description: "K3d Kyma 2.0 to main branch."
        pipeline.clusterprovisioning: "kyma cli"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "upgrade-fast-integration"
        pipeline.trigger: "periodic"
        pipeline.type: "integration"
        testgrid-dashboards: "kyma_integration"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "kyma-upgrade-k3d-kyma2-to-main"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-sa-vm-kyma-integration: "true"
      cron: "0 0 6-18/2 ? * 1-5"
      skip_report: false
      decorate: true
      decoration_config:
        grace_period: 600000000000
        timeout: 7200000000000
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      extra_refs:
        - org: kyma-project
          repo: kyma
          path_alias: github.com/kyma-project/kyma
          base_ref: main
        - org: kyma-incubator
          repo: local-kyma
          path_alias: github.com/kyma-incubator/local-kyma
          base_ref: main
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      reporter_config:
        slack:
          channel: jellyfish-notifications
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-upgrade-k3d.sh"
            env:
              - name: KYMA_PROJECT_DIR
                value: "."
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: kyma-integration-k3d
      annotations:
        description: "Kyma integration periodic job on k3d."
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "periodic"
        pipeline.type: "integration"
        testgrid-dashboards: "kyma_integration"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "kyma-integration-k3d"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-main: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-central-app-connectivity-enabled: "true"
        preset-sa-vm-kyma-integration: "true"
      cron: "5 * * * *"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      extra_refs:
        - org: kyma-project
          repo: kyma
          path_alias: github.com/kyma-project/kyma
          base_ref: main
        - org: kyma-incubator
          repo: local-kyma
          path_alias: github.com/kyma-incubator/local-kyma
          base_ref: main
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            resources:
              requests:
                memory: 100Mi
                cpu: 50m
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: kyma-integration-k3d-telemetry
      annotations:
        pipeline.clusterprovisioning: "k3d"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "k3d"
        pipeline.test: "fast-integration"
        pipeline.trigger: "periodic"
        pipeline.type: "integration"
        testgrid-create-test-group: "false"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "kyma-integration-k3d-telemetry"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-main: "true"
        preset-gc-project-env: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-integration-telemetry-enabled: "true"
        preset-kyma-integration-telemetry-tracing-enabled: "true"
        preset-sa-vm-kyma-integration: "true"
      cron: "0 */2 * * *"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      extra_refs:
        - org: kyma-project
          repo: kyma
          path_alias: github.com/kyma-project/kyma
          base_ref: main
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "/home/prow/go/src/github.com/kyma-project/test-infra/prow/scripts/provision-vm-and-start-kyma-k3d.sh"
            resources:
              requests:
                memory: 3Gi
                cpu: 2
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
    - name: kyma-gke-nightly
      annotations:
        description: "Kyma GKE nightly build (depraceted, needed for sec scans)"
        pipeline.clusterprovisioning: "gcloud cli"
        pipeline.installer: "kyma deploy"
        pipeline.platform: "gke"
        pipeline.trigger: "periodic"
        pipeline.type: "integration"
        testgrid-create-test-group: "false"
      labels:
        prow.k8s.io/pubsub.project: "sap-kyma-prow"
        prow.k8s.io/pubsub.runID: "kyma-gke-nightly"
        prow.k8s.io/pubsub.topic: "prowjobs"
        preset-build-main: "true"
        preset-certificates-bucket: "true"
        preset-cluster-use-ssd: "true"
        preset-cluster-version: "true"
        preset-dind-enabled: "true"
        preset-docker-push-repository-gke-integration: "true"
        preset-gc-compute-envs: "true"
        preset-gc-project-env: "true"
        preset-kms-gc-project-env: "true"
        preset-kyma-artifacts-bucket: "true"
        preset-kyma-encryption-key: "true"
        preset-kyma-guard-bot-github-token: "true"
        preset-kyma-keyring: "true"
        preset-nightly-github-integration: "true"
        preset-sa-gke-kyma-integration: "true"
        preset-slack-alerts: "true"
      cron: "0 2 * * 1-5"
      skip_report: false
      decorate: true
      path_alias: github.com/kyma-project/kyma
      cluster: trusted-workload
      extra_refs:
        - org: kyma-project
          repo: kyma
          path_alias: github.com/kyma-project/kyma
          base_ref: main
        - org: kyma-project
          repo: test-infra
          path_alias: github.com/kyma-project/test-infra
          base_ref: main
      spec:
        containers:
          - image: "eu.gcr.io/kyma-project/test-infra/kyma-integration:v20221215-c20ffd65"
            securityContext:
              privileged: true
            command:
              - "bash"
            args:
              - "-c"
              - "${KYMA_PROJECT_DIR}/test-infra/prow/scripts/cluster-integration/kyma-gke-long-lasting.sh"
            env:
              - name: CLOUDSDK_COMPUTE_ZONE
                value: "europe-west4-b"
              - name: GITHUB_TEAMS_WITH_KYMA_ADMINS_RIGHTS
                value: "cluster-access"
              - name: INPUT_CLUSTER_NAME
                value: "nightly"
              - name: MACHINE_TYPE
                value: "custom-8-15360"
              - name: NODES_PER_ZONE
                value: "1"
              - name: PROVISION_REGIONAL_CLUSTER
                value: "true"
              - name: STACKDRIVER_COLLECTOR_SIDECAR_IMAGE_TAG
                value: "0.6.4"
              - name: TEST_RESULT_WINDOW_TIME
                value: "6h"
            resources:
              requests:
                memory: 200Mi
                cpu: 80m
            volumeMounts:
              - name: sa-stability-fluentd-storage-writer
                mountPath: /etc/credentials/sa-stability-fluentd-storage-writer
                readOnly: true
        tolerations:
          - key: dedicated
            operator: Equal
            value: high-cpu
            effect: NoSchedule
        nodeSelector:
            dedicated: "high-cpu"
        volumes:
          - name: sa-stability-fluentd-storage-writer
            secret:
              secretName: sa-stability-fluentd-storage-writer
  