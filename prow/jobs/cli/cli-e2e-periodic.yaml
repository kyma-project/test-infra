# This file is not generated by templates, due to missing features

periodics: # runs on schedule
  - name: cli-e2e
    annotations:
      pipeline.trigger: "periodic"
    labels:
      prow.k8s.io/pubsub.project: "sap-kyma-prow"
      prow.k8s.io/pubsub.runID: "cli-e2e"
      prow.k8s.io/pubsub.topic: "prowjobs"
      preset-bot-github-token: "true"
      preset-dind-enabled: "true"
      preset-docker-push-repository-kyma: "true"
      preset-kind-volume-mounts: "true"
      preset-sa-gcr-push: "true"
    cron: "0 7 * * *"
    skip_report: false
    decorate: true
    cluster: untrusted-workload
    extra_refs:
      - org: kyma-project
        repo: cli
        path_alias: github.com/kyma-project/cli
        base_ref: main
      - org: kyma-project
        repo: test-infra
        path_alias: github.com/kyma-project/test-infra
        base_ref: main
    spec:
      hostAliases:
        - ip: "127.0.0.1"
          hostnames:
            - "k3d-kcp-local-registry"
      containers:
        - image: "eu.gcr.io/kyma-project/test-infra/buildpack-golang:v20230323-a1ac96db"
          securityContext:
            privileged: true
          command:
            - "/home/prow/go/src/github.com/kyma-project/cli/scripts/test/e2e/alpha_command.sh"
          env:
            - name: KYMA_VERSION
              value: "main"
            - name: KUSTOMIZE_VERSION
              value: v4.5.6
          resources:
            requests:
              memory: 3Gi
              cpu: 1
            limits:
              cpu: 1
              memory: 4Gi
      tolerations:
        - key: dedicated
          operator: Equal
          value: high-cpu
          effect: NoSchedule
      nodeSelector:
        dedicated: "high-cpu"
